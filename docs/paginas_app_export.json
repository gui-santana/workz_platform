{
  "metadata": {
    "title": "Páginas",
    "slug": "paginas",
    "version": "1.0.0"
  },
  "manifest": {
    "runtime": "js",
    "contextRequirements": {
      "mode": "hybrid",
      "allowContextSwitch": true
    },
    "capabilities": {
      "api": {
        "allow": [
          "GET /me"
        ]
      },
      "events": {
        "publish": [
          "pages:published",
          "pages:unpublished"
        ],
        "subscribe": [
          "context:changed",
          "theme:changed"
        ]
      },
      "storage": {
        "kv": true,
        "docs": {
          "enabled": true,
          "types": [
            "page"
          ]
        },
        "blobs": false,
        "scope": "context"
      },
      "proxy": {
        "sources": []
      }
    },
    "sandbox": {
      "postMessage": {
        "allowedOrigins": []
      }
    }
  },
  "code": "(function () {\n  'use strict';\n\n  var APP_NAME = 'Páginas';\n  var STORAGE_TYPE = 'page';\n  var AUTOSAVE_MS = 1200;\n  var DEFAULT_OWNER_SLUG = '';\n\n  var state = {\n    ready: false,\n    view: 'list',\n    pages: [],\n    current: null,\n    dirty: false,\n    autosaveTimer: null,\n    sourceMode: false,\n    owner: {\n      type: 'user',\n      id: null,\n      slug: DEFAULT_OWNER_SLUG\n    }\n  };\n\n  function qs(sel, root) {\n    return (root || document).querySelector(sel);\n  }\n\n  function el(tag, attrs, children) {\n    var node = document.createElement(tag);\n    attrs = attrs || {};\n    Object.keys(attrs).forEach(function (k) {\n      if (k === 'className') node.className = attrs[k];\n      else if (k === 'text') node.textContent = attrs[k];\n      else if (k === 'html') node.innerHTML = attrs[k];\n      else if (k === 'value') node.value = attrs[k];\n      else node.setAttribute(k, attrs[k]);\n    });\n    if (Array.isArray(children)) {\n      children.forEach(function (c) {\n        if (typeof c === 'string') node.appendChild(document.createTextNode(c));\n        else if (c) node.appendChild(c);\n      });\n    }\n    return node;\n  }\n\n  function formatDate(iso) {\n    if (!iso) return '—';\n    var d = new Date(iso);\n    if (isNaN(d.getTime())) return '—';\n    var day = String(d.getDate()).padStart(2, '0');\n    var month = String(d.getMonth() + 1).padStart(2, '0');\n    var year = d.getFullYear();\n    return day + '/' + month + '/' + year;\n  }\n\n  function formatDateTime(iso) {\n    if (!iso) return '—';\n    var d = new Date(iso);\n    if (isNaN(d.getTime())) return '—';\n    var day = String(d.getDate()).padStart(2, '0');\n    var month = String(d.getMonth() + 1).padStart(2, '0');\n    var year = d.getFullYear();\n    var hh = String(d.getHours()).padStart(2, '0');\n    var mm = String(d.getMinutes()).padStart(2, '0');\n    return day + '/' + month + '/' + year + ' · ' + hh + ':' + mm;\n  }\n\n  function slugify(text) {\n    return String(text || '')\n      .toLowerCase()\n      .normalize('NFD')\n      .replace(/[\\u0300-\\u036f]/g, '')\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/(^-|-$)+/g, '')\n      .slice(0, 60);\n  }\n\n  function getRoot() {\n    return qs('#app') || qs('#app-root') || document.body;\n  }\n\n  function showNotice(type, msg) {\n    var area = qs('#pg-notice');\n    if (!area) return;\n    area.className = 'pg-notice ' + type;\n    area.textContent = msg || '';\n    area.style.display = msg ? 'block' : 'none';\n  }\n\n  function setDirty(flag) {\n    state.dirty = !!flag;\n    var badge = qs('#pg-dirty');\n    if (badge) badge.textContent = state.dirty ? 'Alterações não salvas' : 'Tudo salvo';\n  }\n\n  function scheduleAutosave() {\n    if (!state.current) return;\n    clearTimeout(state.autosaveTimer);\n    state.autosaveTimer = setTimeout(function () {\n      saveCurrentPage(false);\n    }, AUTOSAVE_MS);\n  }\n\n  function getEditorContent() {\n    var editor = qs('#pg-editor');\n    if (!editor) return { html: '', text: '' };\n    if (state.sourceMode) {\n      var src = qs('#pg-editor-source');\n      var html = src ? src.value : '';\n      return { html: html, text: stripHtml(html) };\n    }\n    return { html: editor.innerHTML || '', text: editor.textContent || '' };\n  }\n\n  function setEditorContent(html) {\n    var editor = qs('#pg-editor');\n    var src = qs('#pg-editor-source');\n    if (state.sourceMode && src) {\n      src.value = html || '';\n      if (editor) editor.innerHTML = html || '';\n      return;\n    }\n    if (editor) editor.innerHTML = html || '';\n    if (src) src.value = html || '';\n  }\n\n  function stripHtml(html) {\n    var tmp = document.createElement('div');\n    tmp.innerHTML = html || '';\n    return tmp.textContent || tmp.innerText || '';\n  }\n\n  function normalizeDocsResponse(resp) {\n    if (!resp) return [];\n    var list = [];\n    if (Array.isArray(resp)) list = resp;\n    else if (Array.isArray(resp.data)) list = resp.data;\n    else if (Array.isArray(resp.items)) list = resp.items;\n    else if (Array.isArray(resp.results)) list = resp.results;\n    return list.map(function (item) {\n      var id = item.id || item._id || item.doc_id || item.document_id || item.key || null;\n      var data = item.data || item.document || item.payload || item;\n      return { id: id, data: data };\n    });\n  }\n\n  function getPublishUrl(page) {\n    var slug = page && page.slug ? page.slug : '';\n    var ownerSlug = (page && page.ownerSlug) ? page.ownerSlug : (state.owner.slug || '');\n    if (!slug || !ownerSlug) return '';\n    return 'http://paginas.localhost:9090/' + ownerSlug + '/' + slug;\n  }\n\n  async function loadOwnerDefaults() {\n    try {\n      if (window.WorkzSDK && typeof WorkzSDK.getContext === 'function') {\n        var ctx = WorkzSDK.getContext();\n        if (ctx && ctx.type) state.owner.type = ctx.type;\n        if (ctx && ctx.id) state.owner.id = ctx.id;\n      }\n      if (!state.owner.slug && window.WorkzAppConfig && WorkzAppConfig.slug) {\n        state.owner.slug = WorkzAppConfig.slug;\n      }\n    } catch (_) {}\n  }\n\n  async function loadPages() {\n    try {\n      showNotice('info', 'Carregando páginas...');\n      var resp = await WorkzSDK.storage.docs.query({});\n      var docs = normalizeDocsResponse(resp);\n      state.pages = docs\n        .map(function (item) {\n          var data = item.data || {};\n          if (data.type !== STORAGE_TYPE) return null;\n          data.id = item.id || data.id || null;\n          return data;\n        })\n        .filter(Boolean)\n        .sort(function (a, b) {\n          return String(b.updatedAt || '').localeCompare(String(a.updatedAt || ''));\n        });\n      showNotice('info', '');\n    } catch (e) {\n      showNotice('error', 'Falha ao carregar páginas.');\n    }\n  }\n\n  async function saveCurrentPage(showToast) {\n    if (!state.current) return;\n    var content = getEditorContent();\n    var now = new Date().toISOString();\n    state.current.title = state.current.title || 'Sem título';\n    state.current.slug = state.current.slug || slugify(state.current.title);\n    state.current.contentHtml = content.html;\n    state.current.contentText = content.text;\n    state.current.updatedAt = now;\n    state.current.ownerType = state.current.ownerType || state.owner.type || 'user';\n    state.current.ownerId = state.current.ownerId || state.owner.id || null;\n    state.current.ownerSlug = state.current.ownerSlug || state.owner.slug || '';\n    if (!state.current.createdAt) state.current.createdAt = now;\n    if (!state.current.status) state.current.status = 'draft';\n    if (!state.current.id) state.current.id = 'page_' + Date.now();\n\n    try {\n      await WorkzSDK.storage.docs.save(state.current.id, state.current);\n      var idx = state.pages.findIndex(function (p) { return p.id === state.current.id; });\n      if (idx >= 0) state.pages[idx] = state.current;\n      else state.pages.unshift(state.current);\n      setDirty(false);\n      if (showToast) showNotice('success', 'Documento salvo.');\n    } catch (e) {\n      showNotice('error', 'Falha ao salvar documento.');\n    }\n  }\n\n  async function deleteCurrentPage() {\n    if (!state.current) return;\n    if (!confirm('Excluir este documento?')) return;\n    try {\n      await WorkzSDK.storage.docs.delete(state.current.id);\n      state.pages = state.pages.filter(function (p) { return p.id !== state.current.id; });\n      state.current = null;\n      state.view = 'list';\n      render();\n      showNotice('success', 'Documento excluído.');\n    } catch (e) {\n      showNotice('error', 'Falha ao excluir documento.');\n    }\n  }\n\n  async function publishCurrentPage() {\n    if (!state.current) return;\n    var content = getEditorContent();\n    state.current.contentHtml = content.html;\n    state.current.contentText = content.text;\n    state.current.title = state.current.title || 'Sem título';\n    state.current.slug = state.current.slug || slugify(state.current.title);\n\n    var ownerSlug = qs('#pg-owner-slug') ? qs('#pg-owner-slug').value.trim() : '';\n    if (!ownerSlug) {\n      showNotice('warning', 'Informe o slug da entidade para publicar.');\n      return;\n    }\n\n    state.current.ownerSlug = ownerSlug;\n    state.current.ownerType = qs('#pg-owner-type') ? qs('#pg-owner-type').value : state.owner.type;\n    state.current.status = 'published';\n    state.current.publishedAt = new Date().toISOString();\n\n    await saveCurrentPage(false);\n\n    var url = getPublishUrl(state.current);\n    try {\n      if (window.WorkzSDK && typeof WorkzSDK.emit === 'function') {\n        WorkzSDK.emit('pages:published', {\n          id: state.current.id,\n          title: state.current.title,\n          slug: state.current.slug,\n          ownerType: state.current.ownerType,\n          ownerId: state.current.ownerId,\n          ownerSlug: state.current.ownerSlug,\n          publishedAt: state.current.publishedAt,\n          url: url\n        });\n      }\n    } catch (_) {}\n\n    render();\n    showNotice('success', 'Publicado com sucesso.');\n  }\n\n  async function unpublishCurrentPage() {\n    if (!state.current) return;\n    state.current.status = 'draft';\n    state.current.publishedAt = null;\n    await saveCurrentPage(false);\n    try {\n      if (window.WorkzSDK && typeof WorkzSDK.emit === 'function') {\n        WorkzSDK.emit('pages:unpublished', {\n          id: state.current.id,\n          title: state.current.title,\n          slug: state.current.slug,\n          ownerType: state.current.ownerType,\n          ownerId: state.current.ownerId,\n          ownerSlug: state.current.ownerSlug\n        });\n      }\n    } catch (_) {}\n    render();\n    showNotice('info', 'Publicação removida.');\n  }\n\n  function exportCurrentPage(fmt) {\n    if (!state.current) return;\n    var content = getEditorContent();\n    var title = state.current.title || 'documento';\n    var filename = slugify(title) || 'documento';\n    var data = '';\n    var type = 'text/plain';\n    if (fmt === 'html') {\n      data = content.html || '';\n      type = 'text/html';\n      filename += '.html';\n    } else if (fmt === 'md') {\n      data = content.text || '';\n      type = 'text/markdown';\n      filename += '.md';\n    } else {\n      data = content.text || '';\n      type = 'text/plain';\n      filename += '.txt';\n    }\n    var blob = new Blob([data], { type: type });\n    var url = URL.createObjectURL(blob);\n    var a = el('a', { href: url, download: filename });\n    document.body.appendChild(a);\n    a.click();\n    a.remove();\n    URL.revokeObjectURL(url);\n  }\n\n  function toggleSourceMode() {\n    state.sourceMode = !state.sourceMode;\n    var editor = qs('#pg-editor');\n    var source = qs('#pg-editor-source');\n    if (!editor || !source) return;\n    if (state.sourceMode) {\n      source.value = editor.innerHTML || '';\n      source.style.display = 'block';\n      editor.style.display = 'none';\n    } else {\n      editor.innerHTML = source.value || '';\n      source.style.display = 'none';\n      editor.style.display = 'block';\n    }\n  }\n\n  function buildToolbar() {\n    var bar = el('div', { className: 'pg-toolbar' });\n    var btn = function (label, cmd, value) {\n      var b = el('button', { type: 'button', className: 'pg-btn', text: label });\n      b.addEventListener('click', function () {\n        document.execCommand(cmd, false, value || null);\n        scheduleAutosave();\n      });\n      return b;\n    };\n    bar.appendChild(btn('B', 'bold'));\n    bar.appendChild(btn('I', 'italic'));\n    bar.appendChild(btn('U', 'underline'));\n    bar.appendChild(btn('H1', 'formatBlock', 'H1'));\n    bar.appendChild(btn('H2', 'formatBlock', 'H2'));\n    bar.appendChild(btn('Lista', 'insertUnorderedList'));\n    bar.appendChild(btn('Num', 'insertOrderedList'));\n    bar.appendChild(btn('↤', 'outdent'));\n    bar.appendChild(btn('↦', 'indent'));\n    bar.appendChild(btn('Citar', 'formatBlock', 'BLOCKQUOTE'));\n    bar.appendChild(btn('Link', 'createLink', prompt('URL do link:') || ''));\n    bar.appendChild(btn('Imagem', 'insertImage', prompt('URL da imagem:') || ''));\n    var sourceBtn = el('button', { type: 'button', className: 'pg-btn', text: 'Fonte' });\n    sourceBtn.addEventListener('click', function () {\n      toggleSourceMode();\n    });\n    bar.appendChild(sourceBtn);\n    return bar;\n  }\n\n  function renderHeader(container) {\n    var header = el('div', { className: 'pg-header' });\n    var brand = el('div', { className: 'pg-brand' }, [\n      el('div', { className: 'pg-brand-logo', text: 'workz!' }),\n      el('div', { className: 'pg-brand-title', text: 'Páginas' })\n    ]);\n    header.appendChild(brand);\n\n    var actions = el('div', { className: 'pg-header-actions' });\n    if (state.view === 'list') {\n      var newBtn = el('button', { className: 'pg-btn primary', text: 'Novo documento' });\n      newBtn.addEventListener('click', function () {\n        state.current = {\n          id: null,\n          type: STORAGE_TYPE,\n          title: 'Novo documento',\n          slug: '',\n          contentHtml: '',\n          contentText: '',\n          status: 'draft',\n          createdAt: null,\n          updatedAt: null,\n          publishedAt: null,\n          ownerType: state.owner.type,\n          ownerId: state.owner.id,\n          ownerSlug: state.owner.slug\n        };\n        state.view = 'edit';\n        render();\n      });\n      actions.appendChild(newBtn);\n    } else {\n      var backBtn = el('button', { className: 'pg-btn', text: 'Voltar' });\n      backBtn.addEventListener('click', function () {\n        state.view = 'list';\n        render();\n      });\n      actions.appendChild(backBtn);\n\n      var saveBtn = el('button', { className: 'pg-btn primary', text: 'Salvar' });\n      saveBtn.addEventListener('click', function () { saveCurrentPage(true); });\n      actions.appendChild(saveBtn);\n\n      var publishBtn = el('button', { className: 'pg-btn success', text: 'Publicar' });\n      publishBtn.addEventListener('click', publishCurrentPage);\n      actions.appendChild(publishBtn);\n\n      var unpublishBtn = el('button', { className: 'pg-btn', text: 'Despublicar' });\n      unpublishBtn.addEventListener('click', unpublishCurrentPage);\n      actions.appendChild(unpublishBtn);\n\n      var exportBtn = el('button', { className: 'pg-btn', text: 'Exportar' });\n      exportBtn.addEventListener('click', function () {\n        var fmt = prompt('Formato: html, md ou txt', 'html') || 'html';\n        exportCurrentPage(fmt.toLowerCase());\n      });\n      actions.appendChild(exportBtn);\n    }\n\n    header.appendChild(actions);\n    container.appendChild(header);\n  }\n\n  function renderList(container) {\n    var wrapper = el('div', { className: 'pg-card' });\n    var title = el('h3', { className: 'pg-section-title', text: 'Minhas páginas' });\n    wrapper.appendChild(title);\n\n    var table = el('table', { className: 'pg-table' });\n    var thead = el('thead');\n    var headRow = el('tr');\n    ['Nome', 'Modificado em', 'Tipo', 'Data de publicação'].forEach(function (h) {\n      headRow.appendChild(el('th', { text: h }));\n    });\n    thead.appendChild(headRow);\n    table.appendChild(thead);\n\n    var tbody = el('tbody');\n    if (!state.pages.length) {\n      var empty = el('tr');\n      var cell = el('td', { text: 'Nenhuma página criada ainda.', className: 'pg-empty', colspan: '4' });\n      cell.colSpan = 4;\n      empty.appendChild(cell);\n      tbody.appendChild(empty);\n    } else {\n      state.pages.forEach(function (page) {\n        var row = el('tr');\n        var name = el('td');\n        var link = el('a', { href: '#', text: page.title || 'Sem título' });\n        link.addEventListener('click', function (e) {\n          e.preventDefault();\n          state.current = page;\n          state.view = 'edit';\n          render();\n        });\n        name.appendChild(link);\n        row.appendChild(name);\n        row.appendChild(el('td', { text: formatDate(page.updatedAt || page.createdAt) }));\n        row.appendChild(el('td', { text: 'Documento' }));\n        row.appendChild(el('td', { text: page.status === 'published' ? formatDate(page.publishedAt) : 'Não publicado' }));\n        tbody.appendChild(row);\n      });\n    }\n\n    table.appendChild(tbody);\n    wrapper.appendChild(table);\n    container.appendChild(wrapper);\n  }\n\n  function renderEditor(container) {\n    if (!state.current) {\n      container.appendChild(el('div', { className: 'pg-card', text: 'Nenhum documento selecionado.' }));\n      return;\n    }\n\n    var meta = el('div', { className: 'pg-card pg-meta' });\n\n    var titleRow = el('div', { className: 'pg-field-row' }, [\n      el('label', { className: 'pg-label', text: 'Título' }),\n      el('input', { className: 'pg-input', id: 'pg-title', value: state.current.title || '' })\n    ]);\n    meta.appendChild(titleRow);\n\n    var slugRow = el('div', { className: 'pg-field-row' }, [\n      el('label', { className: 'pg-label', text: 'Slug do documento' }),\n      el('input', { className: 'pg-input', id: 'pg-slug', value: state.current.slug || '' })\n    ]);\n    meta.appendChild(slugRow);\n\n    var ownerRow = el('div', { className: 'pg-field-row pg-field-inline' });\n    ownerRow.appendChild(el('label', { className: 'pg-label', text: 'Publicar em' }));\n    var ownerSelect = el('select', { className: 'pg-input', id: 'pg-owner-type' });\n    ['user', 'business', 'team'].forEach(function (opt) {\n      var o = el('option', { value: opt, text: opt });\n      if (state.current.ownerType === opt || state.owner.type === opt) o.selected = true;\n      ownerSelect.appendChild(o);\n    });\n    ownerRow.appendChild(ownerSelect);\n    ownerRow.appendChild(el('input', { className: 'pg-input', id: 'pg-owner-slug', value: state.current.ownerSlug || state.owner.slug || '', placeholder: 'slug-da-entidade' }));\n    meta.appendChild(ownerRow);\n\n    var infoRow = el('div', { className: 'pg-meta-row' }, [\n      el('div', { text: 'Atualizado: ' + formatDateTime(state.current.updatedAt || state.current.createdAt) }),\n      el('div', { id: 'pg-dirty', text: state.dirty ? 'Alterações não salvas' : 'Tudo salvo' })\n    ]);\n    meta.appendChild(infoRow);\n\n    container.appendChild(meta);\n\n    var toolbar = buildToolbar();\n    container.appendChild(toolbar);\n\n    var editorWrap = el('div', { className: 'pg-editor-wrap' });\n    var editor = el('div', { id: 'pg-editor', className: 'pg-editor', contenteditable: 'true' });\n    var editorSource = el('textarea', { id: 'pg-editor-source', className: 'pg-editor-source' });\n    editorWrap.appendChild(editor);\n    editorWrap.appendChild(editorSource);\n    container.appendChild(editorWrap);\n\n    var footer = el('div', { className: 'pg-editor-footer' });\n    var openBtn = el('button', { className: 'pg-btn', text: 'Abrir publicação' });\n    openBtn.addEventListener('click', function () {\n      var url = getPublishUrl(state.current);\n      if (!url) {\n        showNotice('warning', 'Preencha o slug da entidade e publique.');\n        return;\n      }\n      window.open(url, '_blank');\n    });\n    footer.appendChild(openBtn);\n\n    var deleteBtn = el('button', { className: 'pg-btn danger', text: 'Excluir' });\n    deleteBtn.addEventListener('click', deleteCurrentPage);\n    footer.appendChild(deleteBtn);\n    container.appendChild(footer);\n\n    setEditorContent(state.current.contentHtml || '');\n\n    qs('#pg-title').addEventListener('input', function (e) {\n      state.current.title = e.target.value;\n      if (!state.current.slug) {\n        var slug = slugify(state.current.title);\n        state.current.slug = slug;\n        qs('#pg-slug').value = slug;\n      }\n      setDirty(true);\n      scheduleAutosave();\n    });\n\n    qs('#pg-slug').addEventListener('input', function (e) {\n      state.current.slug = slugify(e.target.value || '');\n      e.target.value = state.current.slug;\n      setDirty(true);\n      scheduleAutosave();\n    });\n\n    qs('#pg-owner-type').addEventListener('change', function (e) {\n      state.current.ownerType = e.target.value;\n      setDirty(true);\n      scheduleAutosave();\n    });\n\n    qs('#pg-owner-slug').addEventListener('input', function (e) {\n      state.current.ownerSlug = e.target.value.trim();\n      setDirty(true);\n      scheduleAutosave();\n    });\n\n    editor.addEventListener('input', function () {\n      setDirty(true);\n      scheduleAutosave();\n    });\n\n    editorSource.addEventListener('input', function () {\n      setDirty(true);\n      scheduleAutosave();\n    });\n  }\n\n  function render() {\n    var root = getRoot();\n    root.innerHTML = '';\n\n    injectStyles();\n\n    var container = el('div', { className: 'pg-app' });\n    var notice = el('div', { id: 'pg-notice', className: 'pg-notice', text: '' });\n    notice.style.display = 'none';\n\n    renderHeader(container);\n    container.appendChild(notice);\n\n    var main = el('div', { className: 'pg-main' });\n    if (state.view === 'list') renderList(main);\n    else renderEditor(main);\n\n    container.appendChild(main);\n    root.appendChild(container);\n  }\n\n  function injectStyles() {\n    if (qs('#pg-styles')) return;\n    var style = el('style', { id: 'pg-styles' });\n    style.textContent = [\n      '@import url(\"https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;600&family=Libre+Baskerville:wght@400;700&display=swap\");',\n      ':root{--pg-blue:#0f3b8c;--pg-blue-dark:#0a2d66;--pg-surface:#f4f5fb;--pg-bg1:#bfc3d9;--pg-bg2:#4c66ad;--pg-ink:#1d1f2a;--pg-muted:#6b6f86;}',\n      'body{margin:0;background:linear-gradient(180deg,var(--pg-bg1),var(--pg-bg2));font-family:\"IBM Plex Sans\",Segoe UI,sans-serif;color:var(--pg-ink);}',\n      '.pg-app{min-height:100vh;}',\n      '.pg-header{background:linear-gradient(90deg,var(--pg-blue),var(--pg-blue-dark));padding:18px 28px;display:flex;align-items:center;justify-content:space-between;box-shadow:0 6px 16px rgba(0,0,0,0.2);}',\n      '.pg-brand{display:flex;align-items:center;gap:12px;color:#fff;font-family:\"Libre Baskerville\",serif;}',\n      '.pg-brand-logo{font-weight:700;font-size:14px;text-transform:lowercase;letter-spacing:0.05em;}',\n      '.pg-brand-title{font-size:20px;font-weight:700;}',\n      '.pg-header-actions{display:flex;gap:8px;flex-wrap:wrap;}',\n      '.pg-main{max-width:1100px;margin:24px auto 48px;padding:0 16px;}',\n      '.pg-card{background:rgba(255,255,255,0.92);border-radius:16px;padding:20px 22px;box-shadow:0 12px 30px rgba(15,24,54,0.15);}',\n      '.pg-section-title{margin:0 0 16px;font-size:20px;color:var(--pg-blue);}',\n      '.pg-table{width:100%;border-collapse:collapse;font-size:14px;}',\n      '.pg-table th,.pg-table td{padding:12px 10px;border-bottom:1px solid rgba(10,20,60,0.08);text-align:left;}',\n      '.pg-table th{font-weight:600;color:#2b2f44;background:#f8f8fc;}',\n      '.pg-table a{color:#1f4bb3;text-decoration:none;font-weight:600;}',\n      '.pg-table tr:hover td{background:#f2f3f9;}',\n      '.pg-empty{color:var(--pg-muted);text-align:center;padding:24px;}',\n      '.pg-meta{margin-bottom:16px;display:grid;gap:12px;}',\n      '.pg-field-row{display:grid;gap:8px;}',\n      '.pg-field-inline{grid-template-columns:120px 160px 1fr;align-items:center;}',\n      '.pg-label{font-size:12px;text-transform:uppercase;letter-spacing:0.08em;color:var(--pg-muted);}',\n      '.pg-input{padding:10px 12px;border-radius:10px;border:1px solid rgba(20,30,70,0.15);font-size:14px;}',\n      '.pg-meta-row{display:flex;justify-content:space-between;color:var(--pg-muted);font-size:12px;}',\n      '.pg-toolbar{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:12px;}',\n      '.pg-editor-wrap{background:white;border-radius:18px;box-shadow:inset 0 0 0 1px rgba(20,30,70,0.1);padding:18px;min-height:380px;}',\n      '.pg-editor{min-height:340px;outline:none;font-family:\"Libre Baskerville\",serif;line-height:1.7;font-size:16px;}',\n      '.pg-editor-source{display:none;width:100%;min-height:340px;border:none;outline:none;font-family:monospace;font-size:13px;}',\n      '.pg-editor-footer{margin-top:12px;display:flex;justify-content:space-between;}',\n      '.pg-btn{border:none;border-radius:999px;padding:8px 14px;font-size:13px;background:#eef0f6;color:#1d1f2a;cursor:pointer;font-weight:600;}',\n      '.pg-btn.primary{background:#ffcc4d;color:#1b1c1f;}',\n      '.pg-btn.success{background:#4caf50;color:#fff;}',\n      '.pg-btn.danger{background:#d64550;color:#fff;}',\n      '.pg-notice{margin:12px auto 0;max-width:1100px;border-radius:10px;padding:10px 14px;font-size:13px;}',\n      '.pg-notice.success{background:#e0f4e8;color:#1a6235;}',\n      '.pg-notice.error{background:#fde8ea;color:#91222b;}',\n      '.pg-notice.warning{background:#fff2d7;color:#7a5412;}',\n      '.pg-notice.info{background:#e6efff;color:#20478d;}'\n    ].join('\\n');\n    document.head.appendChild(style);\n  }\n\n  async function bootstrap() {\n    if (!window.WorkzSDK) {\n      var root = getRoot();\n      root.textContent = 'WorkzSDK não encontrado.';\n      return;\n    }\n\n    try {\n      if (typeof WorkzSDK.init === 'function' && !WorkzSDK.isReady) {\n        await WorkzSDK.init({ mode: 'standalone' });\n      }\n    } catch (_) {}\n\n    await loadOwnerDefaults();\n    await loadPages();\n    state.view = 'list';\n    render();\n    state.ready = true;\n  }\n\n  window.StoreApp = { bootstrap: bootstrap };\n})();\n"
}